# Cryptography
Secure Chat

## 项目简介
本项目实现了一个基于“非对称加密 + 对称加密”的简单加密聊天系统，采用客户端-服务端架构。系统使用 RSA-2048 算法安全分发对称密钥，使
用 AES-256-GCM 对聊天内容进行加密，并使用 bcrypt 对用户密码进行哈希存储。通过混合加密机制，实现了聊天内容在网络传输过程中的机密性与
完整性保护。服务端仅负责身份认证与密文转发，不参与消息解密，从而体现加密聊天的核心思想。

## 各文件说明
crypto_utils.py 是系统的密码学工具模块，负责实现所有底层加密操作，包括RSA 密钥对生成、RSA-OAEP 加密与解密、AES-256 密钥生成、AES-256-GCM加密与解密，以及 Base64 编解码。该文件封装了所有密码学细节，是系统的安全核心。
server.py 是服务端程序，负责监听客户端连接、验证用户身份、接收客户端公钥并加密分发房间 AES 密钥，以及转发客户端发送的加密消息。服务端不解密聊天内容，只处理密文数据，因此无法查看用户的聊天明文。
client.py 是客户端程序，负责用户登录、生成 RSA-2048 密钥对、接收并解密服务端发送的 AES 房间密钥，以及使用 AES-256-GCM 对聊天消息进行加密和解密。所有消息加密和解密操作均在客户端完成。

## 整体流程
系统首先通过用户名和密码完成身份认证。服务端使用 bcrypt 对密码进行哈希校验，确保密码不以明文形式存储。
认证成功后，客户端生成 RSA-2048 密钥对，并将公钥发送给服务端。服务端使用该公钥通过 RSA-OAEP 加密房间使用的 AES-256 密钥，并发送给客户端。客户端使用私钥解密，获得共享的 AES 密钥。这样可以避免对称密钥在网络中以明文形式传输。
在聊天阶段，发送方客户端使用 AES-256-GCM 对消息进行加密。加密过程中会生成一个随机 nonce，并产生包含认证标签的密文。客户端将 nonce 和密文发送给服务器。服务器仅转发这些密文数据，不进行解密。接收方客户端使用相同的 AES 密钥和对应的 nonce 进行解密，并自动验证认证标签。如果密文被篡改，解密将失败，从而保证消息的完整性与真实性。

## 如何运行
首先需要安装依赖库：pip install cryptography bcrypt
然后启动服务端程序：python server.py
服务端启动后，可以打开两个终端分别运行客户端：python client.py
使用默认测试账号登录（alice 和 bob）。
登录成功后可以在两个客户端之间发送加密消息。输入 /quit 可以退出聊天。



